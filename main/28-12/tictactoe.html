<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe</title>
    <style>
:root{
    --primary-color:#14bcab;
}

@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap');
*{
   padding: 0;
   margin: 0;
}
body{ 
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    height: 100vh;
    font-family: 'roboto';
}
.container{
    width: 500px;
    height: 500px;
    padding: 10px;
    background-color:var(--primary-color);
    border-radius: 15px;
    padding-top: 20px;
    box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px,
      rgba(0, 0, 0, 0.3) 0px 18px 36px -18px;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;   
}

.utility-ctn{
    width: 100%;
    height: 50px;
    margin-top: 10px;
    display: flex;
    justify-content:space-around;
    align-items:center ;
}

.heading{
    color: #1e1e1e;
    font-family: sans-serif;
    font-size: 1.1rem;
}

.reset-btn{
    background-color: transparent;
    border: none;
    cursor:pointer;
    padding: 10px;
    font-size: 1rem;
}

.game-box{  
    display: grid;
    grid-template-columns: repeat(3,1fr);
    grid-template-rows: repeat(3,1fr);
    gap:10px;
    background-color: #1e1e1e;
}
.cell{
    width:110px;
    height:110px;
    background-color: var(--primary-color);
    font-size: 3.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
}

.X::before{
    content: 'X';
}

.O::before{
    content: 'O';
}

.line{
    background-color: black;
    height: 3px;
    width: 0;
    /*width: 3vw */
    position: absolute;
    background-color: #911d91;
    transition: width 1s ease-in-out;
}

    </style>
</head>
<body>
    <div class="container">
        <div class="line"></div>
        <h2 class="title">Tic Tac Toe</h2>
        <div class="utility-ctn">
            <h2 class="heading">X turn's</h2>
            <button class="reset-btn">Reset</button>
        </div>
        <div class="game-box">
            <div class="cell">
                <!-- <div class="inside-cells">
                    <div class="inside-cell"></div>
                    <div class="inside-cell"></div>
                    <div class="inside-cell"></div>
                    <div class="inside-cell"></div>
                    <div class="inside-cell"></div>
                    <div class="inside-cell"></div>
                    <div class="inside-cell"></div>
                    <div class="inside-cell"></div>
                    <div class="inside-cell"></div>
                </div> -->
            </div>
            <div class="cell"></div>
            <div class="cell"></div>
            <div class="cell"></div>
            <div class="cell"></div>
            <div class="cell"></div>
            <div class="cell"></div>
            <div class="cell"></div>
            <div class="cell"></div>
            
        </div>
    </div>
   
    <script>
       //JS used for executing HTML code 
       const heading = document.querySelector('.heading')

       //document is a parent of HTML file, everything inside html is a child of document 

       //in Web dev its highly recommended to use const, because it gives higher security, because somebody else cannot further change value 

       //we'll not change the heading, we'll change content of tag 
       
       const resetButton = document.querySelector('.reset-btn')
       //console.log(resetButton)

       const gameCells = document.querySelectorAll('.cell')
       //console.log(gameCells)

       //add event listener to each cell 
       //event listener works on single element, so were targetting it individually 
       function cellHandler(){
        console.log("clicked")
    }

       for(cell of gameCells){
           cell.addEventListener('click', cellHandler)
           //when you click on the cell, it displays clicked in console
       }

       var isXturn = true;
       var count = 0;

       const checkGameStatus=()=>{
           //console.log("checking")
           //console.log(gameCells[0].classList)

           //gamecell is an array so use indexing
           const index0ClassList = gameCells[0].classList;
           const index1ClassList = gameCells[1].classList;
           const index2ClassList = gameCells[2].classList;
           const index3ClassList = gameCells[3].classList;
           const index4ClassList = gameCells[4].classList;
           const index5ClassList = gameCells[5].classList;
           const index6ClassList = gameCells[6].classList;
           const index7ClassList = gameCells[7].classList;
           const index8ClassList = gameCells[8].classList;

           if(index0ClassList.contains('O')){
               if(index1ClassList.contains('O') && index2ClassList.contains('O')){
                   alert('O won')
               }
           }
       }

       function cellHandler(event){
        //when we click on the cell 
        //pointerEvent object will show up on console 
        //console.log("event",event)

        //this peice of code targets a specific cell
        //console.log(event.target.classList)
        const classList = event.target.classList
        //check if length>1 then dont get inside the Xturn loop
        //this removes the bug when you click twice on the same field it can be changed 

        if(classList.length > 1){
            return
        }

        if(isXturn)
        {
        //if Xturn is true then print X 
        classList.add('X')
          isXturn=false //turn isXturn=false 
          heading.textContent="O's Turn"
        }
        else
        {
            //when X is true then print O 
            classList.add('O')
            isXturn=true
            heading.textContent="X's turn"
        }

        count= count + 1
        console.log("count", count)
        if(count >= 5){
            checkGameStatus()
        }

       }

       for(cell of gameCells){
           cell.addEventListener('click', cellHandler)
       }

       const resetHandler=()=>{
           window.location.reload()
       }

       //when you click on reset button the game resets 
       resetButton.addEventListener('click', resetHandler)


    </script>
</body>
</html>